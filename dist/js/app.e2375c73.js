(function(t){function e(e){for(var r,s,o=e[0],l=e[1],c=e[2],h=0,u=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},i={app:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var r=a("85ec"),i=a.n(r);i.a},"0a9c":function(t,e,a){"use strict";var r=a("7c36"),i=a.n(r);i.a},"0fd6":function(t,e,a){"use strict";var r=a("a792"),i=a.n(r);i.a},"26b5":function(t,e,a){"use strict";var r=a("6a17"),i=a.n(r);i.a},"452c":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{staticClass:"align-center",attrs:{app:"",dark:"",color:"primary"}},[a("img",{staticClass:"mr-2",attrs:{height:"50px",src:"/img/logo_white.png"}}),a("v-toolbar-title",{staticClass:"display-1 mr-10",on:{click:function(e){return t.home()}}},[a("span",[t._v("SharedAirDFW")])]),a("v-dialog",{model:{value:t.showPM,callback:function(e){t.showPM=e},expression:"showPM"}},[a("particulate-matter",{on:{close:function(e){t.showPM=!1}}})],1),a("v-spacer"),a("v-btn",{attrs:{"x-large":"",exact:"",text:""},on:{click:function(e){return t.flipPage()}}},[t._v(t._s(t.dashboardNav))]),a("v-btn",{attrs:{"x-large":"",depressed:"",exact:"",text:""},on:{click:function(e){t.showPM=!0}}},[a("span",{staticClass:"mr-2 d-none d-lg-flex d-xl-none"},[t._v("Particulate Matter?")]),a("v-icon",{staticClass:"d-flex"},[t._v("help")])],1),a("v-btn",{attrs:{"x-large":"",exact:"",text:""},on:{click:function(e){t.showAbout=!0}}},[a("span",{staticClass:"mr-2"},[t._v("About")])]),a("v-dialog",{model:{value:t.showAbout,callback:function(e){t.showAbout=e},expression:"showAbout"}},[a("about",{on:{close:function(e){t.showAbout=!1}}})],1)],1),a("v-content",[a("router-view")],1)],1)},n=[],s=(a("b0c0"),a("b680"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[a("v-layout",[a("v-flex",{attrs:{xs10:""}},[t._v("About")]),a("v-flex",{staticClass:"text-right",attrs:{xs2:""}},[a("v-icon",{on:{click:function(e){return t.$emit("close")}}},[t._v("close")])],1)],1)],1),a("v-card-text",[a("p",{staticClass:"text-justify"},[t._v(" Under the working title of “ "),a("b",[t._v("SharedAirDFW")]),t._v("” over 100 new custom-built air quality monitors are being distributed throughout the DFW region in the next 12 months that will be able to give residents real time information about the air they breathe for the first time. When it’s up and running, "),a("b",[t._v("it’ll be the first network of its kind in Texas and one of the largest in the U.S.")]),a("br"),a("br"),t._v("Based out of the "),a("b",[t._v("University of Texas at Dallas")]),t._v(" laboratories and built and calibrated by its graduate and undergraduate students, and supported by grants from the NSF, Earth Day Texas, the US Army, Downwinders at Risk, the City of Plano, TX, and the US EPA. These monitors will offer real time information every few seconds through a "),a("b",[t._v("easily accessible app.")]),t._v(" In addition, all data is made available in "),a("b",[t._v("real-time.")]),a("br"),a("br"),t._v("Right now a handful of official EPA regulatory grade monitors provide hourly average air quality information with a latency of a few hours behind real time conditions. "),a("b",[t._v("SharedAirDFW will increase the number of calibrated air quality monitors in DFW by a factor of about forty while giving readings updated every few seconds.")]),a("br"),a("br"),t._v("Some of the first monitor deployments will be across the campus of UT Dallas in Joppa (South Dallas), West Dallas, and Midlothian, around Paul Quinn College for the Southern Dallas neighborhoods surrounding its campus, and across the City of Plano. ")])])],1)}),o=[],l={data:function(){return{}},created:function(){},methods:{}},c=l,d=(a("0fd6"),a("2877")),h=a("6544"),u=a.n(h),p=a("b0afa"),m=a("99d9"),f=a("0e8f"),v=a("132d"),g=a("a722"),y=Object(d["a"])(c,s,o,!1,null,"1636f25b",null),b=y.exports;u()(y,{VCard:p["a"],VCardText:m["b"],VCardTitle:m["c"],VFlex:f["a"],VIcon:v["a"],VLayout:g["a"]});var x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[a("v-layout",[a("v-flex",{attrs:{xs10:""}},[t._v("What is Particulate Matter?")]),a("v-flex",{staticClass:"text-right",attrs:{xs2:""}},[a("v-icon",{on:{click:function(e){return t.$emit("close")}}},[t._v("close")])],1)],1)],1),a("v-card-text",[a("p",{staticClass:"text-justify"},[t._v(" Particulate matter are microscopic solid or liquid matter suspended in the air. They have impacts on climate and precipitation that adversely affect human health, in addition to direct inhalation. Particulate matter smaller than about 10 micrometers, can settle in the bronchi and lungs and cause health problems. Fine particulate matter (PM2.5), tend to penetrate into the gas exchange regions of the lung, and very small particles may pass through the lungs to affect other organs. ")])])],1)},w=[],C={name:"particulate-matter",data:function(){return{}},created:function(){}},k=C,_=(a("e90d"),Object(d["a"])(k,x,w,!1,null,"2ddc10cb",null)),P=_.exports;u()(_,{VCard:p["a"],VCardText:m["b"],VCardTitle:m["c"],VFlex:f["a"],VIcon:v["a"],VLayout:g["a"]});var M=a("2f62");r["a"].use(M["a"]);var T=new M["a"].Store({state:{dashChartVal:{},triggerCharts:0,prevPayload:[],triggerMap:0,selected:[{name:"PM 2.5",id:0,dataType:"PM",select:!1},{name:"Black Carbon",id:1,dataType:"BC",select:!1},{name:"Current 405nm",id:2,dataType:"current-405nm",select:!1},{name:"Flow Temperature",id:3,dataType:"flow-temperature",select:!1},{name:"Humidity",id:4,dataType:"humidity",select:!1},{name:"Pressure",id:5,dataType:"pressure",select:!1},{name:"Temperature",id:6,dataType:"temperature",select:!1}],carPath:[]},mutations:{increaseMapTrigger:function(t){t.triggerMap++},pushValue:function(t,e){t.dashChartVal[e.name]||(t.dashChartVal[e.name]=[]),t.dashChartVal[e.name].push({name:e.name,value:e.value})},shiftPoints:function(t,e){T.state.dashChartVal[e].shift()},storeSelected:function(t,e){t.selected=e},addPointPath:function(t,e){t.carPath.push({pmThresh:e.pmThresh,coord:[e.payload.latitudeCoordinate,e.payload.longitudeCoordinate]})}},getters:{getChart:function(t){return function(e){return t.dashChartVal[e]||(t.dashChartVal[e]=[]),t.dashChartVal[e]}},getPreviousTwoValues:function(t){return function(e){if(!t.dashChartVal[e])return null;var a=t.dashChartVal[e];return 0==a.length?[null,null]:1==a.length?[parseFloat(a[a.length-1].value[1]),null]:[parseFloat(a[a.length-1].value[1]),parseFloat(a[a.length-2].value[1])]}}}}),A={name:"App",store:T,components:{About:b,ParticulateMatter:P},data:function(){return{showAbout:!1,showPM:!1,dashboardNav:null,charts:[]}},created:function(){window["moment"]=this.$moment,"/dashboard"==this.$router.currentRoute.fullPath?this.dashboardNav="Go to Map":this.dashboardNav="Go to Dashboard"},mounted:function(){this.charts=this.$store.state.selected,console.log(this.$mqtt.subscribe("#"))},mqtt:{"001e0610c2e7/2B-BC":function(t){if(null!=t){try{JSON.parse(t.toString())&&(t=JSON.parse(t.toString()))}catch(a){t=JSON.parse(t.toString().replace(/NaN/g,'"NaN"'))}var e=t.dateTime.split(".");t.dateTime=e[0]+"Z",t.PM>=0&&(this.$store.state.prevPayload=t),t.PM<0||t.BC<0?console.log("Negative value(s): PM = "+t.PM+", BC = "+t.BC):(console.log("New incoming data: PM = "+t.PM+", BC = "+t.BC),this.addChartValues(t))}},"001e0610c2e7/GPSGPGGA1":function(t){if(null!=t)try{JSON.parse(t.toString())&&(t=JSON.parse(t.toString()),this.$store.commit("addPointPath",{pmThresh:this.$store.state.prevPayload?this.$store.state.prevPayload:0,payload:t}),console.log("LAT:",t.latitudeCoordinate.toFixed(8),", LNG:",t.longitudeCoordinate.toFixed(8)),this.$store.commit("increaseMapTrigger"))}catch(e){alert(e,"=>",t.toString()),t=JSON.parse(t.toString().replace(/NaN/g,'"NaN"'))}}},methods:{flipPage:function(){"Go to Dashboard"==this.dashboardNav?(this.$router.push({path:"/dashboard"}),this.dashboardNav="Go to Map"):(this.$router.push({path:"/"}),this.dashboardNav="Go to Dashboard")},addChartValues:function(t){for(var e=0;e<this.charts.length;e++)this.$store.commit("pushValue",{name:this.charts[e].dataType,value:[t.dateTime,t[this.charts[e].dataType]]}),this.$store.getters.getChart(this.charts[e].dataType).length>50&&this.$store.commit("shiftPoints",this.charts[e].dataType);this.$store.state.triggerCharts++}}},S=A,D=(a("034f"),a("b0a0"),a("7496")),F=a("40dc"),V=a("8336"),E=a("a75b"),I=a("169a"),O=a("2fa4"),G=a("2a7f"),N=Object(d["a"])(S,i,n,!1,null,null,null),U=N.exports;u()(N,{VApp:D["a"],VAppBar:F["a"],VBtn:V["a"],VContent:E["a"],VDialog:I["a"],VIcon:v["a"],VSpacer:O["a"],VToolbarTitle:G["a"]});var B=a("9483");Object(B["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var z=a("8c4f"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home fill-height"},[a("div",{staticClass:"tracking"},[a("v-btn",{staticClass:"mx-2",attrs:{fab:"",small:""},on:{click:t.toggleFocus}},[a("i",{staticClass:"material-icons"},[t._v("gps_fixed")])])],1),a("div",{staticClass:"fill-height",attrs:{id:"map"}}),a("div",{staticClass:"side-drawer visible"},[a("div",{staticClass:"menu-container"},[a("v-icon",{on:{click:t.slide}},[t._v("menu")])],1),a("div",{staticClass:"text-center"},[a("v-icon",{staticClass:"home mt-1",attrs:{color:"primary",large:""},on:{click:t.reset}},[t._v("home")]),a("v-btn",{staticClass:"ma-2",attrs:{tile:"",outlined:"",color:"primary"},on:{click:function(e){t.howToUse=!0}}},[t._v("How To Use")])],1),t._m(0),a("v-expansion-panels",{staticStyle:{width:"270px"},attrs:{value:t.activePanel,accordion:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[a("div",{staticClass:"d-flex justify-space-between",on:{click:function(t){t.stopPropagation()}}},[a("v-checkbox",{staticClass:"my-0",attrs:{"hide-details":"",color:"primary",label:"SharedAir Monitors"},model:{value:t.sensorLayer,callback:function(e){t.sensorLayer=e},expression:"sensorLayer"}}),a("div",{attrs:{id:"DFW"}})],1)]),a("v-expansion-panel-content",[a("div",[a("v-radio-group",{staticClass:"my-0",attrs:{"hide-details":""},model:{value:t.pmType,callback:function(e){t.pmType=e},expression:"pmType"}},[a("v-radio",{attrs:{color:"primary",label:"PM2.5",value:"pm2_5"}})],1)],1),a("div",{staticClass:"time-label"},[a("v-icon",[t._v("access_time")]),t._v(" "),a("span",[t._v("30-second average")])],1)])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[a("div",{staticClass:"d-flex justify-space-between"},[a("v-checkbox",{staticClass:"my-0",attrs:{"hide-details":"",color:"primary",label:"EPA"},model:{value:t.epaLayer,callback:function(e){t.epaLayer=e},expression:"epaLayer"}}),a("div",{attrs:{id:"EPA"}})],1)]),a("v-expansion-panel-content",[a("div",[t._v(" Disclaimer: The color scale we present does not reflect how EPA presents their data concerning PM2.5 levels. "),a("div",{staticClass:"time-label"},[a("v-icon",[t._v("access_time")]),t._v(" "),a("span",[t._v("1-hour average")])],1)])])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[a("div",{staticClass:"d-flex justify-space-between"},[a("v-checkbox",{staticClass:"my-0",attrs:{"hide-details":"",color:"primary",label:"PurpleAir"},model:{value:t.purpleAirLayer,callback:function(e){t.purpleAirLayer=e},expression:"purpleAirLayer"}}),a("div",{attrs:{id:"PurpleAir"}})],1)]),a("v-expansion-panel-content",[a("div",[t._v(" Disclaimer: The color scale we present does not reflect how PurpleAir presents their data concerning PM2.5 levels. "),a("div",{staticClass:"time-label"},[a("v-icon",[t._v("access_time")]),t._v(" "),a("span",[t._v("10-minute average")])],1)])])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[a("div",{staticClass:"d-flex justify-space-between"},[a("v-checkbox",{staticClass:"my-0",attrs:{"hide-details":"",color:"primary",label:"Air Pollution Burden"},model:{value:t.pollutionLayer,callback:function(e){t.pollutionLayer=e},expression:"pollutionLayer"}}),a("div",{attrs:{id:"pollution"}})],1)]),a("v-expansion-panel-content",[a("div",[t._v("Major Air Pollution Permits. All numbers are in Tons Per Year")])])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[a("div",[a("v-checkbox",{staticClass:"my-0",attrs:{"hide-details":"",color:"primary",label:"Radar"},model:{value:t.radarLayer,callback:function(e){t.radarLayer=e},expression:"radarLayer"}})],1)]),a("v-expansion-panel-content",[a("div",[t._v(" See radar overlay on map... ")])])],1),a("v-expansion-panel",[a("v-expansion-panel-header",[a("div",[a("v-checkbox",{staticClass:"my-0",attrs:{disabled:!t.wind.data_time,"hide-details":"",color:"primary",label:"NOAA (Wind)"},model:{value:t.windLayer,callback:function(e){t.windLayer=e},expression:"windLayer"}})],1)]),a("v-expansion-panel-content",[a("div",{staticClass:"body-2"},[a("div",[a("b",{staticClass:"caption"},[t._v("Data Time: ")]),t._v(t._s(t.wind.data_time?t.wind.data_time:"Updating.."))]),a("div",[a("b",{staticClass:"caption"},[t._v("Updated Last: ")]),t._v(t._s(t.wind.updated_time?t.wind.updated_time:"Updating..")+" ")])])])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"50%"},model:{value:t.howToUse,callback:function(e){t.howToUse=e},expression:"howToUse"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Instructions")]),a("v-card-text",[a("ul",[a("li",[t._v("Single Click a Map Marker to view the Real Time Sensor Information")]),a("br"),a("li",[t._v('Use left side "Layers" options to add different layers like Wind or Radar')]),a("br"),a("li",[t._v("Use The Top Right Button to change map styles")]),a("br")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(e){t.howToUse=!1}}},[t._v("Close")])],1)],1)],1)],1)},R=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scale"},[a("img",{attrs:{src:"/img/graph.PNG"}})])}],W=(a("99af"),a("c740"),a("4160"),a("a15b"),a("d81d"),a("a9e3"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{width:"300px"}},[a("div",[a("v-layout",[a("v-flex",{attrs:{xs11:""}},[a("h3",{staticClass:"text-center"},[t._v(t._s(t.spotName)),a("br")]),a("div",{staticClass:"text-center primary--text"},[t._v(" Current Sensor Data ")])])],1),a("div",[a("br"),a("ul",[t.spot.pm2_5?a("li",{staticClass:"pm25"},[t._v("PM2.5: "+t._s(parseFloat(t.spot.pm2_5).toFixed(2))+" µg/m³")]):t._e(),t.spot.pm1?a("li",[t._v("PM1: "+t._s(parseFloat(t.spot.pm1).toFixed(2))+" µg/m³")]):t._e(),t.spot.pm4?a("li",[t._v("PM4: "+t._s(parseFloat(t.spot.pm4).toFixed(2))+" µg/m³")]):t._e(),t.spot.pm10?a("li",[t._v("PM10: "+t._s(parseFloat(t.spot.pm10).toFixed(2))+" µg/m³")]):t._e(),t.spot.temperature?a("li",[t._v("Temperature: "+t._s(t.spotTemperature().toFixed(2))+" °F")]):t._e(),t.spot.humidity?a("li",[t._v("Humidity: "+t._s(parseFloat(t.spot.humidity).toFixed(2))+" %")]):t._e(),t.spot.dewpoint?a("li",[t._v("DewPoint: "+t._s(parseFloat(t.spot.dewpoint).toFixed(2))+" %")]):t._e()]),a("br"),a("div",{staticClass:"text-right sub-text"},[t._v("Sensor ID: "+t._s(t.spot.sensor_id)+" | Last Updated: "+t._s(t.spot.timestamp))])]),a("hr"),a("div",{staticStyle:{"text-align":"center","font-weight":"bold"}},[t._v("Past 24 hours")]),a("div",{staticClass:"with-3d-shadow with-transitions"},[t._m(0),a("div",{staticClass:"sub-text text-center"},[t._v("PM 2.5 (μg/m³) (1-hour average)")]),a("div",{staticClass:"text-center mt-2"},[a("a",{on:{click:function(e){t.showMore=!0}}},[t._v("More data")])])])],1)]),a("v-dialog",{attrs:{"max-width":"90%"},model:{value:t.showMore,callback:function(e){t.showMore=e},expression:"showMore"}},[a("sensor-chart",{attrs:{sensor:t.spot},on:{close:function(e){t.showMore=!1}}})],1)],1)}),H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"chart"}},[a("div",{staticClass:"my-4 text-center"},[t._v("Loading data...")])])}],Q=(a("ddb0"),new r["a"]({data:function(){return{baseUrl:"https://mintsdata.utdallas.edu:3000"}},methods:{getSensors:function(){return this.$axios.get(this.baseUrl+"/sensor_id_list")},getSensorData:function(t){return this.$axios.get(this.baseUrl+"/latest/"+t)},getSensorLocation:function(t){return this.$axios.get(this.baseUrl+"/location/"+t)},getSensorName:function(t){return this.$axios.get(this.baseUrl+"/sensorNameOf/"+t)},getChartData:function(t,e,a){return""==a?this.$axios.get(this.baseUrl+"/data/pm2_5/".concat(t,"/").concat(e.start,"/").concat(e.end)):this.$axios.get(this.baseUrl+"/data/pm2_5/".concat(t,"/").concat(e.start,"/").concat(e.end,"/").concat(a))},getWindData:function(){return this.$axios.get(this.baseUrl+"/wind_data/latest")}}})),q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[a("v-layout",[a("v-flex",{staticClass:"text-center",attrs:{xs12:""}},[t._v("Concentrations of PM2.5 ")]),a("v-flex",{staticClass:"text-right"},[a("v-icon",{on:{click:function(e){return t.$emit("close")}}},[t._v("close")])],1)],1)],1),a("v-card-text",[a("div",{attrs:{id:"legend"}})]),a("v-card-text",[a("div",{staticClass:"chart2",attrs:{id:"chart2_"+t.sensor.sensor_id}},[a("div",{staticClass:"my-4 text-center"},[t._v("Loading data...")])]),a("h3",{staticClass:"text-center my-4"},[t._v("Choose any date range")]),a("v-container",[a("v-row",[a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-text-field",t._g({attrs:{label:"Start Date","prepend-icon":"event",readonly:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},r))]}}]),model:{value:t.startDateModel,callback:function(e){t.startDateModel=e},expression:"startDateModel"}},[a("v-date-picker",{on:{input:function(e){t.startDateModel=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-text-field",t._g({attrs:{label:"End Date","prepend-icon":"event",readonly:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},r))]}}]),model:{value:t.endDateModel,callback:function(e){t.endDateModel=e},expression:"endDateModel"}},[a("v-date-picker",{on:{input:function(e){t.endDateModel=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),a("v-col",[a("v-select",{attrs:{items:t.viewSelectorItems,label:"View",solo:""},model:{value:t.viewMode,callback:function(e){t.viewMode=e},expression:"viewMode"}})],1),a("v-col",{staticClass:"text-center"},[a("v-btn",{staticClass:"fullscreen-btn",attrs:{color:"primary",large:""},on:{click:t.initChart}},[t._v("Update")])],1)],1)],1),a("h3",{staticClass:"text-center"},[t._v("Timeframe")]),a("p",{attrs:{id:"para"}},[t._v("The graph shows concentrations of PM2.5 from UT Dallas sensor. Also displayed are evidence-based targets for air quality management to protect populations from the adverse health effects of air pollution.")])],1)],1)},Y=[],J={props:["sensor"],data:function(){return{startDateModel:!1,endDateModel:!1,startDate:null,endDate:null,dataInterval:"",viewSelectorItems:["Live View","Hourly Averages"],viewMode:"Live View"}},created:function(){this.startDate=this.$moment.utc().add(-24,"hour").format("YYYY-MM-DD"),this.endDate=this.$moment.utc().format("YYYY-MM-DD")},mounted:function(){this.initChart()},watch:{viewMode:function(){this.initChart()}},methods:{initChart:function(){var t=this;$("#chart2_"+this.sensor.sensor_id).html("<div class='my-4 text-center'>Loading data...</div>"),Q.getChartData(this.sensor.sensor_id,{start:this.$moment.utc(this.startDate).toISOString(),end:this.$moment.utc(this.endDate).toISOString()},this.dataInterval).then((function(e){e.data.length?($("#chart2_"+t.sensor.sensor_id).html("<svg> </svg>"),t.createChart(e.data)):$("#chart2_"+t.sensor.sensor_id).html("<div class='my-4 text-center'>No data available.</div>")}))},updateDataInterval:function(t){this.dataInterval=t;var e="All data";switch(t){case"1 60:60:60":e="1 Day";break;case"1:60:60":e="1 hour";break;case"30:60":e="30 minutes";break;case"10:60":e="10 minutes";break}$("#interval-info").html("Interval: "+e)},changeInterval:function(t){var e=t.length;e/=3e3,e=Math.round(e);var a=[],r=[],i=0,n=0;r.push({x:t[0].x,y:t[0].y});for(var s=1;s<t.length;s++){if(r.length>=e){for(n=0,i=0;i<r.length;i++)n+=r[i].y;n/=r.length,a.push({x:r[0].x,y:n}),r=[]}r.push({x:t[s].x,y:t[s].y})}if(r.length>=1){for(n=0,i=0;i<r.length;i++)n+=r[i].y;n/=r.length,a.push({x:r[0].x,y:n})}return a},createChart:function(t){var e,a=[],r=[],i=[],n=[],s=[];if("Hourly Averages"!=this.viewMode)for(var o=0;o<t.length;o++)a.push({x:this.$moment.utc(t[o].timestamp).local().toDate(),y:t[o].pm2_5});else for(var l=null,c=0,d=0,h=[],u=0,p=0,m=0;m<t.length;m++)c=this.$moment.utc(t[m].timestamp).local().toDate().getHours(),c==l||null==l?h.push(t[m].pm2_5):(u=d3.mean(h),p=d3.deviation(h),a.push({x:this.$moment.utc(t[d].timestamp).local().toDate(),y:u}),r.push({x:this.$moment.utc(t[d].timestamp).local().toDate(),y:u-p}),i.push({x:this.$moment.utc(t[d].timestamp).local().toDate(),y:u+p}),n.push({x:this.$moment.utc(t[d].timestamp).local().toDate(),y:u-p}),s.push({x:this.$moment.utc(t[d].timestamp).local().toDate(),y:2*p}),d=m,h=[]),l=c;a.length>3e3&&(a=this.changeInterval(a)),e="Hourly Averages"==this.viewMode?Math.max.apply(Math,i.map((function(t){return t.y}))):Math.max.apply(Math,a.map((function(t){return t.y})));var f=0,v=0,g=0,y=0,b=0;e<10?f=e:e<20?(f=10,v=e-f):e<50?(f=10,v=10,g=e-(f+v)):e<100?(f=10,v=10,g=30,y=e-(f+v+g)):(f=10,v=10,g=30,y=50,b=e-(f+v+g+y));var x=[{key:"PM 2.5",values:[{}],strokeWidth:"Hourly Averages"==this.viewMode?3:1.5,color:"#1f77b4"},{key:"PM 2.5 -SD",values:[{}],color:"#69b2ee"},{key:"PM 2.5 +SD",values:[{}],color:"#69b2ee"},{key:"0-10µg/m³",values:[{x:a[0].x,y:f},{x:a[a.length-1].x,y:f}],color:"#ffff44"},{key:"10-20µg/m³",values:[{x:a[0].x,y:v},{x:a[a.length-1].x,y:v}],color:"#ff5500"},{key:"20-50µg/m³",values:[{x:a[0].x,y:g},{x:a[a.length-1].x,y:g}],color:"#cc0000"},{key:"50-100µg/m³",values:[{x:a[0].x,y:y},{x:a[a.length-1].x,y:y}],color:"#990099"},{key:"100+µg/m³",values:[{x:a[0].x,y:b},{x:a[a.length-1].x,y:b}],color:"#aa2626"},{key:"Lower Area",values:n,color:"rgba(255, 255, 68, 0)"},{key:"SD Area",values:s,color:"#69b2ee"}];x[0].type="line",x[0].yAxis=1,x[0].values=a,x[1].type="line",x[1].yAxis=1,x[1].values=i,x[2].type="line",x[2].yAxis=1,x[2].values=r,x[3].type="area",x[3].yAxis=1,x[4].type="area",x[4].yAxis=1,x[5].type="area",x[5].yAxis=1,x[6].type="area",x[6].yAxis=1,x[7].type="area",x[7].yAxis=1,x[8].type="area",x[8].yAxis=2,x[9].type="area",x[9].yAxis=2;var w="Hourly Averages"==this.viewMode,C=this.sensor.sensor_id;function k(){d3.select("#legend").selectAll("*").remove();for(var t=0;t<x.length-2;t++)if(x[t].values.length>0){var e="";if(2==t)continue;e=1==t?"PM 2.5 SD":x[t].key,d3.select("#legend").append("span").style("height","20px").style("width","20px").style("background-color",x[t].color).style("border-radius","50%").style("display","inline-block").style("margin-right","5px").style("position","relative").style("top","25px"),d3.select("#legend").append("text").text(e).style("font-size","12px").style("padding-right","20px").style("position","relative").style("top","20px")}}nv.addGraph((function(){k();var t=nv.models.multiChart().margin({top:15,right:60,bottom:50,left:90}).color(d3.scale.category10().range()).yDomain1([0,e]);return t.showLegend(!1),nv.utils.windowResize((function(){t.update()})),t.yDomain2([0,e]),t.legend.updateState(!1),t.xAxis.tickFormat((function(t){return w?d3.time.format("%b %d %I:00:00%p")(new Date(t)):d3.time.format("%b %d %I:%M:%S%p")(new Date(t))})).staggerLabels(!0),t.yAxis1.tickFormat((function(t){return d3.format(",.2f")(t)+"µg/m³"})),t.yAxis2.tickFormat((function(t){return d3.format(",.2f")(t)+"µg/m³"})),d3.select("#chart2_"+C+" svg").datum(x).transition().duration(500).call(t),t}))}}},Z=J,X=(a("0a9c"),a("62ad")),K=a("a523"),tt=a("2e4b"),et=a("e449"),at=a("0fd9"),rt=a("b974"),it=a("8654"),nt=Object(d["a"])(Z,q,Y,!1,null,"a620996a",null),st=nt.exports;u()(nt,{VBtn:V["a"],VCard:p["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:X["a"],VContainer:K["a"],VDatePicker:tt["a"],VFlex:f["a"],VIcon:v["a"],VLayout:g["a"],VMenu:et["a"],VRow:at["a"],VSelect:rt["a"],VTextField:it["a"]});var ot={components:{SensorChart:st},props:["spot","spotName"],data:function(){return{showMore:!1}},watch:{spot:function(){this.initChart()}},created:function(){},mounted:function(){this.initChart()},methods:{initChart:function(){var t=this;$("#chart").css("height","50px").html("<div class='my-4 text-center'>Loading data...</div>"),Q.getChartData(this.spot.sensor_id,{start:this.$moment.utc().add(-24,"hour").toISOString(),end:this.$moment.utc().toISOString()},"").then((function(e){e.data.length?($("#chart").css("height","250px").html("<svg> </svg>"),t.createChart(e.data)):$("#chart").css("height","50px").html("<div class='my-4 text-center'>No data available.</div>")}))},formatNumber:function(t){return Number(t).toFixed(1)},spotTemperature:function(){return 1.8*this.spot.temperature+32},closeIt:function(){this.$emit("close")},createChart:function(t){for(var e=[],a=0;a<t.length;a++)e.push({x:this.$moment.utc(t[a].timestamp).local().toDate(),y:t[a].pm2_5});var r=Math.max.apply(Math,e.map((function(t){return t.y}))),i=0,n=0,s=0,o=0,l=0;r<10?i=r:r<20?(i=10,n=r-i):r<50?(i=10,n=10,s=r-(i+n)):r<100?(i=10,n=10,s=30,o=r-(i+n+s)):(i=10,n=10,s=30,o=50,l=r-(i+n+s+o));var c=[{key:"PM 2.5",values:[{}]},{key:"0-10µg/m³",values:[{x:e[0].x,y:i},{x:e[e.length-1].x,y:i}],color:"#ffff44"},{key:"10-20µg/m³",values:[{x:e[0].x,y:n},{x:e[e.length-1].x,y:n}],color:"#ff5500"},{key:"20-50µg/m³",values:[{x:e[0].x,y:s},{x:e[e.length-1].x,y:s}],color:"#cc0000"},{key:"50-100µg/m³",values:[{x:e[0].x,y:o},{x:e[e.length-1].x,y:o}],color:"#990099"},{key:"100+µg/m³",values:[{x:e[0].x,y:l},{x:e[e.length-1].x,y:l}],color:"#aa2626"}];c[0].type="line",c[0].yAxis=1,c[0].values=e,c[1].type="area",c[1].yAxis=1,c[2].type="area",c[2].yAxis=1,c[3].type="area",c[3].yAxis=1,c[4].type="area",c[4].yAxis=1,c[5].type="area",c[5].yAxis=1,nv.addGraph((function(){var t=Math.max.apply(Math,c[0].values.map((function(t){return t.y}))),e=nv.models.multiChart().margin({top:30,right:30,bottom:30,left:90}).showLegend(!1).color(d3.scale.category10().range()).yDomain1([0,t]);return e.xAxis.tickFormat((function(t){return d3.time.format("%I:%M%p")(new Date(t))})).tickValues([]),e.yAxis1.tickFormat((function(t){return d3.format(",.1f")(t)+"µg/m³"})).showMaxMin(!1),d3.select("#chart svg").datum(c).transition().duration(500).call(e),e}))}}},lt=ot,ct=(a("c4f7"),Object(d["a"])(lt,W,H,!1,null,"1f65006a",null)),dt=ct.exports;u()(ct,{VDialog:I["a"],VFlex:f["a"],VLayout:g["a"]});var ht=new r["a"]({data:function(){return{baseUrl:"https://www.purpleair.com/json",sensors:[31403,49395,13013,12969,8682,2644,16271,2508,8548,2667,46221,47967]}},methods:{getSensorData:function(t){return this.$axios.get(this.baseUrl+"?show="+t)}}}),ut=new r["a"]({data:function(){return{baseUrl:"https://api.openaq.org/v1",city:"Dallas-Fort Worth-Arlington"}},methods:{getLatestCityData:function(){return this.$axios.get(this.baseUrl+"/latest?city="+this.city)},getHistoricalCityData:function(){return this.$axios.get(this.baseUrl+"/measurements?city="+this.city)}}}),pt=new r["a"]({data:function(){return{baseUrl:"https://www.airnowapi.org/aq/data",bboxRecent:"BBOX=-97.754269,31.802118,-95.966931,33.589456&dataType=C&format=application/json&verbose=1&nowcastonly=1&includerawconcentrations=0&API_KEY=743E8D00-0FD4-4B80-A52E-356DE6E4266C"}},methods:{getLatestCityData:function(t){return this.$axios.get("https://cors-anywhere.herokuapp.com/"+this.baseUrl+"/?parameters="+t+"&"+this.bboxRecent)},getHistoricalData:function(t,e){return this.$axios.get(this.baseUrl+"/?startDate="+t+"&endDate="+e+"&parameters="+this.bboxRecent)}}}),mt=(a("dca8"),a("f309"));r["a"].use(mt["a"]);var ft=new mt["a"]({icons:{iconfont:"md"},options:{customProperties:!0},theme:{themes:{light:{primary:Object.freeze({base:"#38b5e6",lighten5:"#E7F6FC",lighten4:"#C3E9F8",lighten3:"#9CDAF3",lighten2:"#74CBEE",lighten1:"#56C0EA",darken1:"#32AEE3",darken2:"#2BA5DF",darken3:"#249DDB",darken4:"#178DD5",accent1:"#FFFFFF",accent2:"#D4EDFF",accent3:"#A1D9FF",accent4:"#87CEFF"}),secondary:Object.freeze({base:"#c3ef21",lighten5:"#F8FDE4",lighten4:"#EDFABC",lighten3:"#E1F790",lighten2:"#D5F464",lighten1:"#CCF142",darken1:"#BDED1D",darken2:"#B5EB18",darken3:"#AEE814",darken4:"#A1E40B",accent1:"#FFFFFF",accent2:"#F3FFDB",accent3:"#E1FFA8",accent4:"#D9FF8F"})}}}}),vt=a("daa7"),gt=a.n(vt),yt="Mints"+parseInt(1e5*Math.random()),bt={clientId:yt,username:"mintstest",password:"eryeNYj9Aj"};r["a"].use(gt.a,"mqtts://mqtt.circ.utdallas.edu:8083",bt);var xt={name:"home",components:{Sensor:dt},data:function(){return{map:null,selectedSensor:null,layerControl:L.control.layers([],[]),layers:{},wind:{data_time:null,updated_time:null},popupStatus:!1,sensorComponents:[],radarLayer:!1,windLayer:!1,sensorLayer:!0,epaLayer:!1,purpleAirLayer:!1,openAQLayer:!1,pollutionLayer:!1,howToUse:!1,epaType:"PM25",pmType:"pm2_5",activePanel:0,sensors:[],sensorGroup:L.markerClusterGroup({disableClusteringAtZoom:13}),openAQGroup:L.layerGroup(),purpleAirGroup:L.layerGroup(),epaGroup:L.layerGroup(),pollutionGroup:L.layerGroup(),path:null,marker:null,focused:!0}},computed:{getLastRead:function(){return this.$store.state.prevPayload},getTrigger:function(){return this.$store.state.triggerMap}},watch:{pmType:function(){this.refreshIcons()},openAQLayer:function(t){t?this.openAQGroup.addTo(this.map):this.map.removeLayer(this.openAQGroup)},purpleAirLayer:function(t){t?this.purpleAirGroup.addTo(this.map):this.map.removeLayer(this.purpleAirGroup)},pollutionLayer:function(t){t?this.pollutionGroup.addTo(this.map):this.map.removeLayer(this.pollutionGroup)},epaLayer:function(t){t?this.epaGroup.addTo(this.map):this.map.removeLayer(this.epaGroup),this.openAQLayer=t},epaType:function(){this.epaLayer&&(this.loadEPA(!0),this.loadOpenAQ(!0))},sensorLayer:function(t){t?this.sensorGroup.addTo(this.map):this.map.removeLayer(this.sensorGroup)},radarLayer:function(t){t?this.layers.radar.addTo(this.map):this.map.removeLayer(this.layers.radar)},windLayer:function(t){t?this.layers.wind_layer.addTo(this.map):this.map.removeLayer(this.layers.wind_layer)},getTrigger:function(){this.addPoint()}},mounted:function(){$(window).width()<1920&&this.slide(),this.buildLayers(),this.initMap(),this.loadData(),this.loadOpenAQ(),this.loadEPA(),this.loadPurpleAir(),this.loadPollution(),this.bindIconsToAccordian(),this.replotLine()},methods:{toggleFocus:function(){this.focused?this.focused=!1:this.focused=!0},replotLine:function(){var t=this.$store.state.carPath.length;if(t>1)for(var e=2;e<t;e++)this.path=L.polyline([this.$store.state.carPath[e-2].coord,this.$store.state.carPath[e-1].coord],{color:this.getMarkerColor(this.$store.state.carPath[e-1].pmThresh)}).addTo(this.map),this.path.bringToFront()},addPoint:function(){L.icon({iconUrl:"../../img/north.png",iconSize:[20,35]}),L.icon({iconUrl:"../../img/south.png",iconSize:[20,35]}),L.icon({iconUrl:"../../img/left.png",iconSize:[20,35]}),L.icon({iconUrl:"../../img/right.png",iconSize:[25,40]});var t=this.$store.state.carPath.length,e=this.$moment.duration(this.$moment.utc().diff(this.$moment.utc(this.$store.state.carPath[this.$store.state.carPath.length-1].timestamp))).asMinutes(),a=e>10?"#808080":this.getMarkerColor(this.getLastRead.PM);t>1&&(this.path=L.polyline([this.$store.state.carPath[t-2].coord,this.$store.state.carPath[t-1].coord],{color:this.getMarkerColor(this.getLastRead.PM?this.getLastRead.PM:0)}).addTo(this.map),this.path.bringToFront(),this.marker?(this.marker.setIcon(L.divIcon({className:"svg-icon-car",html:this.getCircleMarker("#38b5e6",a,40,parseFloat(this.getLastRead.PM?this.getLastRead.PM:0).toFixed(2)),iconAnchor:[20,32],iconSize:[20,32]})),this.marker.setLatLng(this.$store.state.carPath[t-1].coord)):(this.marker=L.marker(this.$store.state.carPath[t-1].coord,{icon:L.divIcon({className:"svg-icon-car",html:this.getCircleMarker("#38b5e6",a,40,parseFloat(this.getLastRead.PM?this.getLastRead.PM:0).toFixed(2)),iconAnchor:[20,32],iconSize:[20,32]})}),this.map.hasLayer(this.marker)||this.marker.addTo(this.map)),this.focused&&this.map.fitBounds(this.path.getBounds(),{maxZoom:18}))},buildLayers:function(){this.layers.bright=L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:23}),this.layerControl.addBaseLayer(this.layers.bright,"Carto Positron"),this.layers.dark_mode=L.tileLayer("http://{s}.sm.mapstack.stamen.com/(toner-lite,$fff[difference],$fff[@23],$fff[hsl-saturation@20])/{z}/{x}/{y}.png",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}),this.layerControl.addBaseLayer(this.layers.dark_mode,"Dark Mode"),this.layers.satellite=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),this.layerControl.addBaseLayer(this.layers.satellite,"Satellite"),this.layers.streets=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors'}),this.layerControl.addBaseLayer(this.layers.streets,"Street Maps"),this.layers.radar=L.tileLayer.wms("http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi",{layers:"nexrad-n0r",format:"image/png",transparent:!0,attribution:"Weather data &copy; 2015 IEM Nexrad",zIndex:1e3}),this.buildWindLayer("Carto Positron",!1)},windColorScale:function(t){var e=["rgb(36,104,180)","rgb(60,157,194)","rgb(128,205,193)","rgb(151,218,168)","rgb(198,231,181)","rgb(238,247,217)","rgb(255,238,159)","rgb(252,217,125)","rgb(255,182,100)","rgb(252,150,75)","rgb(250,112,52)","rgb(245,64,32)","rgb(237,45,28)","rgb(220,24,32)","rgb(180,0,35)"],a=["rgb(219,151,75)","rgb(195,98,61)","rgb(127,50,62)","rgb(104,37,87)","rgb(57,24,87)","rgb(17,8,38)","rgb(0,17,38)","rgb(3,38,130)","rgb(0,73,155)","rgb(3,105,180)","rgb(5,143,203)","rgb(10,191,223)","rgb(18,210,227)","rgb(35,231,223)","rgb(75,255,220)"];return"Dark Mode"==t||"Satellite"==t?e:a},buildWindLayer:function(t,e){var a=this;Q.getWindData().then((function(r){a.layers.wind_layer=L.velocityLayer({displayValues:!0,displayOptions:{velocityType:"GBR Wind",position:"bottomright",emptyString:"No velocity data",angleConvention:"bearingCW",displayPosition:"topright",displayEmptyString:"No velocity data",speedUnit:"m/s"},data:r.data,maxVelocity:10,colorScale:a.windColorScale(t)}),a.wind.data_time=r.data[0].recorded_time.replace(".000Z",""),a.wind.updated_time=r.data[0].header.refTime.replace(".000Z",""),e&&(a.windLayer=!0)}))},bindIconsToAccordian:function(){$("#PurpleAir").append(this.getPentagonMarker("#9370DB","#ffff9e",25,"")),$("#EPA").append(this.getSquareMarker("#6B8E23","#ffff9e",25,"")),$("#DFW").append(this.getCircleMarker("#38b5e6","#ffff9e",25,"")),$("#pollution").append(this.getCircleMarker("#38b5e6","#000000",20,""))},initMap:function(){var t=this;this.map=L.map("map",{center:[32.89746164575043,-97.04086303710938],zoom:10,layers:this.layers.bright,zoomControl:!1}),window.lmap=this.map,this.map.addControl(L.control.zoom({position:"topright"})),this.map.doubleClickZoom.disable(),this.layerControl.addTo(this.map),this.sensorGroup.addTo(this.map),L.control.scale({position:"bottomright"}).addTo(this.map),this.map.on("baselayerchange",(function(e){var a=t.windLayer;t.windLayer=!1,t.buildWindLayer(e.name,a)}))},loadPollution:function(){var t=this;this.$axios.get("/json/PollutionBurdenByCouncilDistrict.json").then((function(e){e.data.forEach((function(e){t.renderPollution(e)}))}))},renderPollution:function(t){t.marker=L.marker([t.Latitude,t.Longitude],{icon:L.divIcon({className:"svg-icon",html:this.getCircleMarker("#38b5e6","#000000",20,""),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[0,-30]})}),t.marker.addTo(this.pollutionGroup);var e="<div style='font-size:14px'>";e+="<div style='text-align:center; font-weight:bold;'>"+t["Industry Name"]+" </div><br>",e+="<div style='text-align:center;'>"+t.Address+" </div><br>",e+="<li> SOX : "+t["Permitted PM (TPY)"]+" </li><br>",e+="<li> PM : "+t["Permitted SOx (TPY)"]+" </li><br>",e+="<li> Voc : "+t["Permitted VoC (TPY)"]+" </li><br>",e+="</div>",t.marker.bindPopup(e)},loadPurpleAir:function(){var t=this;ht.getSensorData(ht.sensors.join("|")).then((function(e){e.data.results.forEach((function(e){e.ParentID||t.renderPurpleAir(e)}))}))},renderPurpleAir:function(t){t.marker=L.marker([t.Lat,t.Lon],{icon:L.divIcon({className:"svg-icon",html:this.getPentagonMarker("#9370DB",this.getMarkerColor(t.pm2_5_atm),40,t.pm2_5_atm),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[0,-30]})}),t.marker.addTo(this.purpleAirGroup);var e="<div style='font-size:14px'>";e+="<div style='text-align:center; font-weight:bold'>"+t.Label+" </div><br>",e+="<li class='pm25'> PM2.5 : "+t.pm2_5_atm+" µg/m³ </li><br>",e+="<li> PM1 : "+t.pm1_0_atm+" µg/m³ </li><br>",e+="<li> PM10 : "+t.pm10_0_atm+" µg/m³ </li><br>",e+="<li> Temperature : "+t.temp_f+"°F </li><br>",e+="<li> Humidity : "+t.humidity+"% </li><br>";var a=t.LastUpdateCheck,r=new Date(1e3*a),i=["01","02","03","04","05","06","07","08","09","10","11","12"],n=r.getFullYear(),s=i[r.getMonth()],o=r.getDate(),l=r.getHours(),c=r.getMinutes(),d=r.getSeconds(),h=n+"-"+s+"-"+o+" "+l+":"+c+":"+d;e+="<div style='text-align:right; font-size: 11px'>Last Updated: "+h+" UTC</div>",e+="</div>",t.marker.bindPopup(e)},loadOpenAQ:function(t){var e=this;t&&(this.map.removeLayer(this.openAQGroup),this.openAQGroup=L.layerGroup(),this.openAQGroup.addTo(this.map)),ut.getLatestCityData().then((function(t){t.data.results.forEach((function(t){e.renderOpenAQ(t)}))}))},renderOpenAQ:function(t){var e=this,a=this.epaType.toLocaleLowerCase();t.measurements.forEach((function(r){if(a==r.parameter){var i="",n="#6B8E23";"pm25"==r.parameter&&(n=e.getMarkerColor(r.value),i=r.value),t.marker=L.marker([t.coordinates.latitude,t.coordinates.longitude],{icon:L.divIcon({className:"svg-icon",html:e.getSquareMarker("#6B8E23",n,40,i),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[0,-30]})}),t.marker.addTo(e.openAQGroup);var s="<div style='font-size:14px'>";s+="<div style='text-align:center; font-weight:bold'>"+t.location+" </div><br>","pm25"==r.parameter?s+="<li class='pm25'>PM2.5 : "+r.value+" "+r.unit+" </li><br>":"o3"==r.parameter&&(s+="<li>O3 : "+r.value+" "+r.unit+" </li><br>"),s+="<div style='text-align:right; font-size: 11px'>Last Updated: "+t.measurements[0].lastUpdated+" UTC</div>",s+="</div>",t.marker.bindPopup(s)}}))},loadEPA:function(t){var e=this;t&&(this.map.removeLayer(this.epaGroup),this.epaGroup=L.layerGroup(),this.epaGroup.addTo(this.map)),pt.getLatestCityData(this.epaType).then((function(t){t.data.forEach((function(t){e.renderEPA(t)}))}))},renderEPA:function(t){var e="#66CDAA",a="";"PM2.5"==t.Parameter&&(e=this.getMarkerColor(t.Value),a=t.Value),t.marker=L.marker([t.Latitude,t.Longitude],{icon:L.divIcon({className:"svg-icon",html:this.getSquareMarker("#66CDAA",e,40,a),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[0,-30]})}),t.marker.addTo(this.epaGroup);var r="<div style='font-size:14px'>";r+="<div style='text-align:center; font-weight:bold'>"+t.SiteName+" </div><br>",r+="<li class='"+("PM2.5"==t.Parameter?"pm25":"")+"'> "+t.Parameter+" : "+t.Value+" µg/m³ </li><br>",r+="<div style='text-align:right; font-size: 11px'>Last Updated: "+t.UTC+" UTC</div>",r+="</div>",t.marker.bindPopup(r)},loadData:function(){var t=this;Q.getSensors().then((function(e){var a=0;e.data.forEach((function(e){Q.getSensorLocation(e).then((function(r){r.data.length&&null!=r.data[0].longitude&&null!=r.data[0].latitude&&Q.getSensorName(e).then((function(i){i.data.length&&null!=i.data[0].sensor_name&&Q.getSensorData(e).then((function(n){n.data.length&&(n.data.id=e,t.sensors.push({data:n.data[0],location:r.data[0],name:i.data[0].sensor_name}),t.renderSensor(t.sensors[t.sensors.length-1].data,t.sensors[t.sensors.length-1].location,t.sensors[t.sensors.length-1].name,a++))}))}))}))}))}))},renderSensor:function(t,e,a,r){var i=this,n=this.$moment.duration(this.$moment.utc().diff(this.$moment.utc(t.timestamp))).asMinutes(),s=n>10?"#808080":this.getMarkerColor(t[this.pmType]);t.marker=L.marker([e.latitude,e.longitude],{icon:L.divIcon({className:"svg-icon-"+t.sensor_id,html:this.getCircleMarker("#38b5e6",s,40,parseFloat(t[this.pmType]).toFixed(2)),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[0,-30]}),title:a,alt:t.sensor_id,zIndexOffset:5*r}),t.marker.addTo(this.sensorGroup);var o=L.popup({offset:L.point(-150,45),maxWidth:"300px",autoPan:!0,keepInView:!0}).setContent("<div id='flycard'></div>");t.marker.bindPopup(o),t.marker.on("click",(function(){i.selectedSensor=t})),t.marker.on("popupopen",(function(e){i.sensorEvent(e,t,a)}))},redrawSensors:function(t,e,a){var r=this,i=this.$moment.duration(this.$moment.utc().diff(this.$moment.utc(t.timestamp))).asMinutes(),n=i>10?"#808080":this.getMarkerColor(t[this.pmType]);this.sensors[this.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data.marker.setIcon(L.divIcon({className:"svg-icon-"+t.sensor_id,html:this.getCircleMarker("#38b5e6",n,40,parseFloat(t[this.pmType]).toFixed(2)),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[150,-30]})),this.sensors[this.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data.marker.isPopupOpen()&&this.sensors[this.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data.sensor_id==t.sensor_id&&(this.sensors[this.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data.marker.closePopup(),this.popupStatus=!0),e.marker.on("popupopen",(function(e){r.checkSensor(e,r.sensors[r.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data,a,t)})),this.popupStatus&&this.sensors[this.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data.sensor_id==t.sensor_id&&(this.sensors[this.sensors.findIndex((function(e){return e.data.sensor_id===t.sensor_id}))].data.marker.openPopup(),console.log("opening popup again"),this.popupStatus=!1)},checkSensor:function(t,e,a,i){var n=new r["a"]({vuetify:ft,render:function(t){return t(dt,{props:{spot:i,spotName:a}})}}).$mount().$el;e.marker.setPopupContent((function(){return n}))},sensorEvent:function(t,e,a){var i=this,n=new r["a"]({vuetify:ft,render:function(t){return t(dt,{props:{spot:i.sensors[i.sensors.findIndex((function(t){return t.data.sensor_id===e.sensor_id}))].data,spotName:a}})}});n.$mount("#flycard"),t.popup._source.sensorPopup=n},buildMarkerIcon:function(t){return L.divIcon({className:"svg-icon",html:this.getSVGMarker(this.getMarkerColor(t)),iconAnchor:[20,10],iconSize:[20,32],popupAnchor:[0,-30]})},getMarkerColor:function(t){return t>=0&&t<=10?"#ffff52":t>10&&t<=20?"#ff6600":t>20&&t<=50?"#ff5534":t>50&&t<=100?"#D34FD0":t>100?"#AB5753":void 0},invertHex:function(t){return(16777215^Number("0x1".concat(t))).toString(16).substr(1).toUpperCase()},getCircleMarker:function(t,e,a,r){var i=this.invertHex(e),n='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(a,'" height="').concat(a,'" viewBox="0 0 24 24">\n                        <circle fill="').concat(e,'" fill-opacity="0.8" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="').concat(t,'" cx="12" cy="12" r="10"></circle>\n                        <text id="sensorText" x="12" y="15" fill="').concat(i,'" text-anchor="middle" font-family="PT Sans" font-size="8" >').concat(r,"</text></svg>");return n},getSquareMarker:function(t,e,a,r){var i='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(a,'" height="').concat(a,'" viewBox="0 0 24 24"><rect fill="').concat(e,'" fill-opacity="0.8" stroke="').concat(t,'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><text x="12" y="15" style="font-weight: 100" text-anchor="middle" font-family="PT Sans" font-size="8">').concat(r,"</text></svg>");return i},getHexagonMarker:function(t,e,a,r){var i='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(a,'" height="').concat(a,'" viewBox="0 0 24 24"><path fill="').concat(e,'" fill-opacity="0.8" stroke="').concat(t,'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 2l9 4.9V17L12 22l-9-4.9V7z"/><text x="12" y="15" style="font-weight: 100" text-anchor="middle" font-family="PT Sans" font-size="8">').concat(r,"</text></svg>");return i},getOctagonMarker:function(t,e,a,r){var i='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(a,'" height="').concat(a,'" viewBox="0 0 24 24"><polygon fill="').concat(e,'" fill-opacity="0.8" stroke="').concat(t,'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><text x="12" y="15" style="font-weight: 100" text-anchor="middle" font-family="PT Sans" font-size="8">').concat(r,"</text></svg>");return i},getPentagonMarker:function(t,e,a,r){var i='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(a,'" height="').concat(a,'" viewBox="0 0 572 545"><path fill="').concat(e,'" fill-opacity="0.8" stroke="').concat(t,'" stroke-width="30" stroke-linecap="round" stroke-linejoin="round" d="M 286,10 L 10,210 L 116,535 L 456,535 L 562,210 Z"/><text x="280" y="340" style="font-weight: 400" text-anchor="middle" font-family="PT Sans" font-size="180">').concat(r,"</text></svg>");return i},refreshIcons:function(){var t=this;this.sensors.forEach((function(e){e.marker.setStyle({fillColor:t.getMarkerColor(e)})}))},reset:function(){this.selectedSensor=null,this.radarLayer=!1,this.windLayer=!0,this.sensorLayer=!0,this.epaLayer=!1,this.purpleAirLayer=!1,this.openAQLayer=!1,this.pollutionLayer=!1,this.howToUse=!1,this.epaType="PM25",this.pmType="pm2_5",this.activePanel=0,this.map.setView([32.89746164575043,-97.04086303710938],10)},slide:function(){var t=$(".side-drawer");t.hasClass("visible")?t.animate({left:"-280px"},"slow").removeClass("visible"):t.animate({left:"0px"},"slow").addClass("visible")}}},wt=xt,Ct=(a("b079"),a("ac7c")),kt=a("cd55"),_t=a("49e2"),Pt=a("c865"),Lt=a("0393"),Mt=a("67b6"),Tt=a("43a6"),At=Object(d["a"])(wt,j,R,!1,null,"9c51c1fe",null),St=At.exports;u()(At,{VBtn:V["a"],VCard:p["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCheckbox:Ct["a"],VDialog:I["a"],VExpansionPanel:kt["a"],VExpansionPanelContent:_t["a"],VExpansionPanelHeader:Pt["a"],VExpansionPanels:Lt["a"],VIcon:v["a"],VRadio:Mt["a"],VRadioGroup:Tt["a"],VSpacer:O["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("div",{staticClass:"sideBar visible"},[a("div",{staticClass:"menu"},[a("v-icon",{attrs:{id:"icon1"},on:{click:t.slide}},[t._v("chevron_left")]),a("v-icon",{attrs:{id:"icon2"},on:{click:t.slide}},[t._v("chevron_right")])],1),a("v-list",{staticClass:"list",attrs:{shaped:"",flat:""}},[a("v-list-item-group",{attrs:{multiple:""}},[a("draggable",{staticClass:"list-group",attrs:{list:t.charts,disabled:!t.enabled,"ghost-class":"ghost"},on:{start:function(e){t.dragging=!0},end:function(e){t.dragging=!1}}},t._l(t.charts,(function(e,r){return a("v-checkbox",{key:r,staticClass:"black-label",attrs:{label:e.name},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"chart.select"}})})),1)],1)],1)],1),a("div",{staticClass:"charts"},[a("draggable",{staticClass:"list-group",attrs:{list:t.charts,disabled:!t.enabled,"ghost-class":"ghost"},on:{start:function(e){t.dragging=!0},end:function(e){t.dragging=!1}}},t._l(t.charts,(function(e,r){return e.select?a("DashboardChart",{key:e.id,attrs:{name:e.name,dataType:e.dataType,sidebarOpen:t.sidebarOpen}}):t._e()})),1)],1)])},$t=[],Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"chart",attrs:{id:t.dataType}}),a("div",{staticClass:"readout",attrs:{id:t.dataType+"-readout"}},[t._v(t._s(t.readout))])])},Vt=[],Et=a("313e"),It=a.n(Et),Ot={props:["dataType","name","sidebarOpen"],data:function(){return{chart:null,previousTwoValues:null,readout:null}},mounted:function(){this.initChart(),this.updateChart()},computed:{getChart:function(){return this.$store.getters.getChart(this.dataType)},getTrigger:function(){return this.$store.state.triggerCharts}},watch:{sidebarOpen:function(){this.resizeHandle()},getTrigger:function(){this.updateChart()}},methods:{initChart:function(){var t={title:{text:this.name,left:"center"},xAxis:{type:"time",splitLine:{show:!1},axisLabel:{margin:8,formatter:function(t){var e=It.a.format.formatTime("hh",t),a=It.a.format.formatTime(":mm:ss",t),r=e>=12?"PM":"AM";return e%=12,e=e||12,e+a+" "+r}}},yAxis:{type:"value",boundaryGap:!1,min:0,splitLine:{show:!1},axisLabel:{fontSize:16}},grid:{show:!0,backgroundColor:"#cccccc",left:70,top:30,right:200,bottom:30},series:[{name:"Values",type:"line",color:"#38b6e6",lineStyle:{width:4},markLine:{silent:!0,symbol:"none",lineStyle:{color:"#777777",width:2},label:{show:!1}},showSymbol:!1,hoverAnimation:!1,animation:!1,useUTC:!1,data:this.getChart}]};this.chart=It.a.init(document.getElementById(this.dataType)),this.chart.setOption(t),window.addEventListener("resize",this.resizeHandle),"PM"==this.dataType&&this.chart.setOption({visualMap:{show:!1,pieces:[{gt:0,lt:10,color:"#ffff44"},{gt:10,lt:20,color:"#ff5500"},{gt:20,lt:50,color:"#cc0000"},{gt:50,lt:100,color:"#990099"},{gt:100,color:"#aa2626"}]}})},updateChart:function(){this.previousTwoValues=this.$store.getters.getPreviousTwoValues(this.dataType);var t=this.previousTwoValues[0],e=this.previousTwoValues[1];t&&(null==e?this.readout=t.toFixed(1):t==e?(this.readout=t.toFixed(1),"PM"==this.dataType&&(document.getElementById(this.dataType+"-readout").style.color="#38b6e6")):t>e?(this.readout="▲ "+t.toFixed(1),"PM"==this.dataType&&(document.getElementById(this.dataType+"-readout").style.color="#f90000")):t<e&&(this.readout="▼ "+t.toFixed(1),"PM"==this.dataType&&(document.getElementById(this.dataType+"-readout").style.color="#00b300")),this.chart.setOption({series:[{data:this.getChart,markLine:{data:[{yAxis:t}]}}]}))},resizeHandle:function(){this.chart.resize()}}},Gt=Ot,Nt=(a("dedc"),Object(d["a"])(Gt,Ft,Vt,!1,null,"63337fdb",null)),Ut=Nt.exports,Bt=a("b76a"),zt=a.n(Bt),jt={name:"dashboard",components:{DashboardChart:Ut,draggable:zt.a},data:function(){return{charts:[],sidebarOpen:!0,dragging:!1,enabled:!0}},mounted:function(){this.charts=this.$store.state.selected,$(window).width()<600&&this.slide()},beforeDestroy:function(){this.$store.commit("storeSelected",this.charts)},methods:{slide:function(){var t=this,e=$(".sideBar"),a=$(".charts"),r=$("#icon1"),i=$("#icon2");e.hasClass("visible")?(r.css("display","none"),i.css("display","block"),a.animate({"padding-left":"0px"},"slow",(function(){t.sidebarOpen=!t.sidebarOpen})),e.animate({left:"-270px"},"slow").removeClass("visible")):(r.css("display","block"),i.css("display","none"),a.animate({"padding-left":"320px"},"slow",(function(){t.sidebarOpen=!t.sidebarOpen})),e.animate({left:"0px"},"slow").addClass("visible"))}}},Rt=jt,Wt=(a("26b5"),a("8860")),Ht=a("1baa"),Qt=Object(d["a"])(Rt,Dt,$t,!1,null,"6326a9a4",null),qt=Qt.exports;u()(Qt,{VCheckbox:Ct["a"],VIcon:v["a"],VList:Wt["a"],VListItemGroup:Ht["a"]}),r["a"].use(z["a"]);var Yt=[{path:"/",name:"home",component:St},{path:"/dashboard",name:"dashboard",component:qt}],Jt=new z["a"]({mode:"history",routes:Yt}),Zt=Jt,Xt=a("9ca8");a("627c"),a("ef97");r["a"].component("chart",Xt["a"]);var Kt=a("bc3a"),te=a.n(Kt),ee=a("2ead"),ae=a.n(ee);a("bf44"),a("07fb");r["a"].config.productionTip=!1,r["a"].prototype.$axios=te.a,r["a"].use(ae.a),new r["a"]({router:Zt,vuetify:ft,render:function(t){return t(U)}}).$mount("#app")},"6a17":function(t,e,a){},"7a57":function(t,e,a){},"7c36":function(t,e,a){},"85ec":function(t,e,a){},a792:function(t,e,a){},b079:function(t,e,a){"use strict";var r=a("fdbd"),i=a.n(r);i.a},b0a0:function(t,e,a){"use strict";var r=a("452c"),i=a.n(r);i.a},bd51:function(t,e,a){},c4f7:function(t,e,a){"use strict";var r=a("bd51"),i=a.n(r);i.a},dedc:function(t,e,a){"use strict";var r=a("7a57"),i=a.n(r);i.a},e722:function(t,e,a){},e90d:function(t,e,a){"use strict";var r=a("e722"),i=a.n(r);i.a},fdbd:function(t,e,a){}});
//# sourceMappingURL=app.e2375c73.js.map